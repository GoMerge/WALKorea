<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>WALKorea - ë©”ì¸</title>
  <meta name="description" content="í•œêµ­ ì—¬í–‰ ì¼ì • ê´€ë¦¬">
  <meta name="keywords" content="ì—¬í–‰, ìº˜ë¦°ë”, ì¼ì •, WALKorea">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/drift-zoom/drift-basic.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
<style>
  .social-login {
    display: flex;
    flex-direction: column;   /* ì„¸ë¡œë¡œ ì •ë ¬ */
    gap: 8px;
  }

  .btn-oauth {
    width: 100%;              /* í•œ ì¤„ ê½‰ ì±„ìš°ê¸° */
    height: 44px;
    border-radius: 999px;
    font-size: 14px;
    font-weight: 500;
    border-width: 1px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0 12px;
  }

  .btn-oauth + .btn-oauth {
    margin-left: 0;
  }

  .oauth-logo {
    width: 18px;
    height: 18px;
    margin-right: 6px;
  }

  /* ë„¤ì´ë²„: ì´ˆë¡ */
  .btn-oauth-naver {
    background-color: #03c75a;
    border-color: #03c75a;
    color: #ffffff;
  }
  .btn-oauth-naver:hover {
    background-color: #02b553;
    border-color: #02b553;
  }

  /* êµ¬ê¸€: í° ë°”íƒ• + íšŒìƒ‰ ë³´ë” */
  .btn-oauth-google {
    background-color: #ffffff;
    border-color: #dadce0;
    color: #3c4043;
  }
  .btn-oauth-google:hover {
    background-color: #f7f8f8;
    border-color: #c0c3c7;
  }

  /* ì¹´ì¹´ì˜¤: ë…¸ë‘ */
  .btn-oauth-kakao {
    background-color: #fee500;
    border-color: #fee500;
    color: #3c1e1e;
  }
  .btn-oauth-kakao:hover {
    background-color: #f2d600;
    border-color: #f2d600;
  }
</style>
<head>
    <!-- ì§€ë„ êµ¬í˜„ -->
  <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=fd93df643bf67f10524ef70aafa1a1a6"></script>
  <base href="/">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Property Details - TheProperty Bootstrap Template</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/drift-zoom/drift-basic.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: TheProperty
  * Template URL: https://bootstrapmade.com/theproperty-bootstrap-real-estate-template/
  * Updated: Aug 05 2025 with Bootstrap v5.3.7
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
    
</head>
<body>
  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="header-container container-fluid container-xl position-relative d-flex align-items-center justify-content-between">
      
      <!-- Logo -->
      <a href="/" class="logo d-flex align-items-center me-auto me-xl-0">
        <h1 class="sitename">WALKorea</h1>
      </a>

      <!-- Navigation Menu -->
      <nav id="navmenu" class="navmenu">
        <ul>
          <li class="dropdown">
            <a href="/"><span>ì—¬í–‰ì •ë³´</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="/places/list?contenttypeid=12&page=1&sort=updated">ê´€ê´‘ì§€</a></li>
              <li><a href="/places/list?contenttypeid=14&page=1&sort=updated">ë¬¸í™”ì‹œì„¤</a></li>
              <li><a href="/places/list?contenttypeid=15&page=1&sort=updated">ì¶•ì œ</a></li>
              <li><a href="/places/list?contenttypeid=32&page=1&sort=updated">ìˆ™ë°•</a></li>
              <li><a href="/places/list?contenttypeid=39&page=1&sort=updated">ìŒì‹ì </a></li>
              <li><a href="/places/list?contenttypeid=38&page=1&sort=updated">ì‡¼í•‘</a></li>
              <li><a href="/places/list?contenttypeid=28&page=1&sort=updated">ë ˆí¬ì¸ </a></li>
            </ul>
          </li>
          <li><a href="/places/map_more">ì§€ë„</a></li>
          <li><a href="/mypage_calendar">ë§ˆì´í˜ì´ì§€</a></li>
        </ul>
      </nav>

      <!-- ë¹„ë¡œê·¸ì¸: ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ì ìš©) -->
      <div id="nav-guest" class="d-flex align-items-center gap-2">
        <a class="btn-getstarted" href="/signup">íšŒì›ê°€ì…</a>
        <a class="btn-getstarted" href="/login">ë¡œê·¸ì¸</a>
      </div>

      <!-- ë¡œê·¸ì¸: ì•Œë¦¼/ë‹‰ë„¤ì„/ë¡œê·¸ì•„ì›ƒ (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ì ìš©) -->
      <div id="nav-user" class="d-none d-flex align-items-center gap-3">

        <!-- ì•Œë¦¼ ë²„íŠ¼ (ì‘ê²Œ) -->
        <div class="dropdown">
          <button id="notifDropdown"
                  class="btn btn-outline-success btn-sm position-relative px-2 py-1 dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false">
            <i class="bi bi-bell"></i>
            <span id="notif-badge"
                  class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger d-none small">
              0
            </span>
          </button>

          <div class="dropdown-menu dropdown-menu-end notif-dropdown">
            <div class="notif-header d-flex justify-content-between align-items-center">
              <span class="fw-semibold">ì•Œë¦¼</span>
              <button id="notif-clear-all" class="btn btn-link btn-sm text-danger p-0">ì „ì²´ì‚­ì œ</button>
            </div>
            <div class="notif-body">
              <p id="notif-empty-text" class="notif-empty text-muted small mb-2">
                ì•„ì§ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.
              </p>
              <ul id="notif-list" class="notif-list list-unstyled mb-0"></ul>
            </div>
          </div>
        </div>

        <!-- ë‹‰ë„¤ì„ + ë¼ë²¨ -->
        <div class="d-flex align-items-center gap-2">
          <div id="header-initial"
              class="mypage-user-badge"
              style="width:32px; height:32px; font-size:16px; margin-right:0;">
            ë‹‰ë„¤ì„
          </div>
          <span id="header-nickname" class="fw-semibold"></span>
        </div>

        <!-- ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼: ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì¬ì‚¬ìš© -->
        <button id="nav-logout" class="btn-getstarted btn-logout-small">
          ë¡œê·¸ì•„ì›ƒ
        </button>
      </div>
    </div>
  </header>
  <main class="main">

    <!-- Page Title -->
    <div class="page-title">
      <div class="heading">
        <div class="container">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-8">
              <h1 class="heading-title">ë¡œê·¸ì¸</h1>
            </div>
          </div>
        </div>
      </div>
      <nav class="breadcrumbs">
        <div class="container">
          <ol>
            <li><a href="/">WALKorea</a></li>
            <li class="current">ë¡œê·¸ì¸</li>
          </ol>
        </div>
      </nav>
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-5">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h3 class="mb-4 text-center">ë¡œê·¸ì¸</h3>
                    <form id="login-form">
                        <div class="mb-3">
                            <label class="form-label">ì•„ì´ë””</label>
                            <input type="text" class="form-control" name="userid" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
                            <input type="password" class="form-control" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-success w-100 mb-2">ë¡œê·¸ì¸</button>
                    </form>
                    <div class="d-flex justify-content-between mb-2">
                        <a href="/signup" class="small">íšŒì›ê°€ì…</a>
                        <a href="/resetpw" class="small">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
                    </div>
                    <hr>
                    <div class="text-center fw-semibold mb-3">ì†Œì…œ ë¡œê·¸ì¸</div>
                    <div class="social-login mt-3">
                      <button id="naver-btn"  type="button" class="btn-oauth btn-oauth-naver">ë„¤ì´ë²„ë¡œ ë¡œê·¸ì¸</button>
                      <button id="google-btn" type="button" class="btn-oauth btn-oauth-google">êµ¬ê¸€ë¡œ ë¡œê·¸ì¸</button>
                      <button id="kakao-btn" type="button" class="btn-oauth btn-oauth-kakao">ì¹´ì¹´ì˜¤ë¡œ ë¡œê·¸ì¸</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</main>
<footer id="footer" class="footer position-relative">


    <div class="footer-bottom">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-6">
            <div class="copyright">
              <p>Â© <span>WALKorea</span></p>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="footer-bottom-links">
              <a href="#">ê°œë°œì ê¹€í˜œì˜</a>
              <a href="#">ê°œë°œì ì´ì§€ì˜</a>
            </div>
            <div class="credits">
            </div>
          </div>
        </div>
      </div>
    </div>

  </footer>
<script>
const API_BASE = "";
document.getElementById("naver-btn").onclick = function() {
    window.location.href = API_BASE + "/auth/oauth/naver/login";
};
document.getElementById("google-btn").onclick = function() {
    window.location.href = API_BASE + "/auth/oauth/google/login";
};
document.getElementById("kakao-btn").onclick = function() {
    window.location.href = API_BASE + "/auth/oauth/kakao/login";
};

// ë¡œê·¸ì¸ í¼ ì²˜ë¦¬
document.getElementById("login-form").addEventListener("submit", async function(e) {
    e.preventDefault();
    console.log("login form submit fired");
    
    const form = e.target;
    const res = await fetch(API_BASE + "/auth/login", {
        method: "POST",
        headers: {"Content-Type": "application/x-www-form-urlencoded"},
        body: new URLSearchParams({username: form.userid.value, password: form.password.value})
    });
    
    console.log("login status", res.status);
    if (res.ok) {
        const data = await res.json();
        console.log("login data", data);
        if (data.access_token) {
            localStorage.setItem("access_token", data.access_token);
            if (data.refresh_token) {
                localStorage.setItem("refresh_token", data.refresh_token);
            }
        }
        
        alert("ë¡œê·¸ì¸ ì„±ê³µ!");
        
        // ğŸ”¥ ì˜¬ë°”ë¥¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë¡œì§ (setTimeout ì œê±°!)
        const redirectUrl = localStorage.getItem("postLoginRedirect");
        console.log("ë¦¬ë‹¤ì´ë ‰íŠ¸ URL:", redirectUrl);
        
        if (redirectUrl) {
            localStorage.removeItem("postLoginRedirect");
            window.location.href = redirectUrl;  // ìƒì„¸í˜ì´ì§€!
        } else {
            window.location.href = "/";  // ê¸°ë³¸: ë©”ì¸
        }
    } else {
        const err = await res.json().catch(()=>null);
        console.log("login error", err);
        alert((err && err.detail) || "ë¡œê·¸ì¸ ì‹¤íŒ¨. ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.");
    }
});
</script>
<script type="module">
  import { initHeader } from "/assets/js/header.js";

  window.addEventListener("DOMContentLoaded", async () => {
    await initHeader();                   // í—¤ë” + ì•Œë¦¼ ì´ˆê¸°í™”
  });
</script>
</body>
</html>
